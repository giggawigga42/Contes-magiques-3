<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1a1a2e">
    <title>Contes Magiques AI</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <h1>ğŸ¦Š <span data-i18n="title">Contes Magiques</span></h1>
            <p class="tagline" data-i18n="subtitle">Des histoires enchantÃ©es gÃ©nÃ©rÃ©es par IA</p>
        </header>

        <!-- Language Selector -->
        <div class="language-bar">
            <span class="lang-label">ğŸŒ</span>
            <div class="language-selector" id="languageSelector"></div>
        </div>

        <!-- Setup Screen -->
        <div class="screen active" id="setupScreen">
            <div class="card">
                <h2 data-i18n="createStory">ğŸŒŸ CrÃ©e ton histoire</h2>
                
                <div class="input-group">
                    <label data-i18n="nameLabel">ğŸ‘¤ PrÃ©nom de l'enfant</label>
                    <input type="text" id="childName" placeholder="Ex: Emma" maxlength="20">
                </div>

                <div class="input-group">
                    <label data-i18n="ageLabel">ğŸ‚ Ã‚ge</label>
                    <div class="age-selector">
                        <button class="age-btn" data-age="2-4">2-4 ans</button>
                        <button class="age-btn selected" data-age="5-7">5-7 ans</button>
                        <button class="age-btn" data-age="8-10">8-10 ans</button>
                    </div>
                </div>

                <div class="input-group">
                    <label data-i18n="themeLabel">ğŸ­ ThÃ¨me</label>
                    <div class="theme-grid" id="themeGrid"></div>
                </div>

                <div class="input-group">
                    <label data-i18n="characterLabel">ğŸ§™ Personnage clÃ©</label>
                    <div class="character-grid" id="characterGrid"></div>
                </div>

                <div class="input-group">
                    <label data-i18n="locationLabel">ğŸ“ Lieu</label>
                    <div class="location-grid" id="locationGrid"></div>
                </div>

                <div class="input-group">
                    <label data-i18n="lengthLabel">ğŸ“ Longueur</label>
                    <div class="length-selector" id="lengthSelector"></div>
                </div>

                <button class="generate-btn" id="generateBtn">
                    <span class="btn-text">âœ¨ <span data-i18n="generateBtn">GÃ©nÃ©rer l'histoire</span></span>
                    <span class="btn-loader hidden">ğŸª„ <span data-i18n="generating">GÃ©nÃ©ration...</span></span>
                </button>
            </div>
        </div>

        <!-- Story Screen -->
        <div class="screen" id="storyScreen">
            <div class="card story-card">
                <div class="story-header">
                    <button class="back-btn" onclick="backToSetup()">
                        â† <span data-i18n="back">Retour</span>
                    </button>
                    <h2 id="storyTitle"></h2>
                </div>

                <div class="illustration-container">
                    <div class="illustration-placeholder" id="illustration">ğŸ¨</div>
                </div>

                <div class="story-content" id="storyContent"></div>

                <div class="story-moral" id="storyMoral"></div>

                <div class="story-actions">
                    <button class="action-btn" onclick="speakStory()">
                        ğŸ”Š <span data-i18n="read">Lire</span>
                    </button>
                    <button class="action-btn secondary" onclick="saveStory()">
                        ğŸ’¾ <span data-i18n="save">Sauvegarder</span>
                    </button>
                    <button class="action-btn secondary" onclick="backToSetup()">
                        ğŸ“– <span data-i18n="newStory">Nouvelle</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Loading Screen -->
        <div class="screen" id="loadingScreen">
            <div class="loading-container">
                <div class="spinner">ğŸª„</div>
                <p data-i18n="generating">La magie opÃ¨re...</p>
                <p class="loading-sub">L'IA imagine votre histoire</p>
            </div>
        </div>
    </div>

    <!-- Install Prompt -->
    <div class="install-prompt hidden" id="installPrompt">
        <p>ğŸ“± <span data-i18n="title">Contes Magiques</span></p>
        <button onclick="installPWA()">Installer</button>
        <button onclick="dismissInstall()">Plus tard</button>
    </div>

    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
