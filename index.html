<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1a1a2e">
    <title>Contes Magiques AI</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <h1>ğŸ¦Š Contes Magiques</h1>
            <p class="tagline">Histoires magiques gÃ©nÃ©rÃ©es par IA</p>
        </header>

        <!-- Setup Screen -->
        <div class="screen active" id="setupScreen">
            <div class="card">
                <h2>ğŸŒŸ CrÃ©e ton histoire</h2>
                
                <div class="input-group">
                    <label>ğŸ‘¤ PrÃ©nom de l'enfant</label>
                    <input type="text" id="childName" placeholder="Ex: Emma" maxlength="20">
                </div>

                <div class="input-group">
                    <label>ğŸ‚ Ã‚ge</label>
                    <div class="age-selector">
                        <button class="age-btn" data-age="2-4">2-4 ans</button>
                        <button class="age-btn selected" data-age="5-7">5-7 ans</button>
                        <button class="age-btn" data-age="8-10">8-10 ans</button>
                    </div>
                </div>

                <div class="input-group">
                    <label>ğŸ“ Longueur</label>
                    <div class="length-selector">
                        <button class="length-btn" data-length="courte">Courte</button>
                        <button class="length-btn selected" data-length="moyenne">Moyenne</button>
                        <button class="length-btn" data-length="longue">Longue</button>
                    </div>
                </div>

                <div class="input-group">
                    <label>ğŸ­ ThÃ¨me</label>
                    <div class="theme-grid">
                        <button class="theme-card" data-theme="animaux">
                            <span class="theme-icon">ğŸ¦</span>
                            <span class="theme-name">Animaux</span>
                        </button>
                        <button class="theme-card" data-theme="espace">
                            <span class="theme-icon">ğŸš€</span>
                            <span class="theme-name">Espace</span>
                        </button>
                        <button class="theme-card" data-theme="princesses">
                            <span class="theme-icon">ğŸ°</span>
                            <span class="theme-name">Princesses</span>
                        </button>
                        <button class="theme-card" data-theme="aventure">
                            <span class="theme-icon">âš”ï¸</span>
                            <span class="theme-name">Aventure</span>
                        </button>
                        <button class="theme-card" data-theme="dragons">
                            <span class="theme-icon">ğŸ‰</span>
                            <span class="theme-name">Dragons</span>
                        </button>
                        <button class="theme-card selected" data-theme="magie">
                            <span class="theme-icon">âœ¨</span>
                            <span class="theme-name">Magie</span>
                        </button>
                    </div>
                </div>

                <button class="generate-btn" id="generateBtn" onclick="generateStory()">
                    <span class="btn-text">âœ¨ GÃ©nÃ©rer l'histoire</span>
                    <span class="btn-loader hidden">ğŸª„ GÃ©nÃ©ration en cours...</span>
                </button>
            </div>
        </div>

        <!-- Story Screen -->
        <div class="screen" id="storyScreen">
            <div class="card story-card">
                <div class="story-header">
                    <button class="back-btn" onclick="backToSetup()">â† Retour</button>
                    <h2 id="storyTitle"></h2>
                </div>

                <div class="illustration-container">
                    <div class="illustration-placeholder" id="illustration">
                        ğŸ¨ GÃ©nÃ©ration de l'illustration...
                    </div>
                </div>

                <div class="story-content" id="storyContent"></div>

                <div class="story-moral" id="storyMoral"></div>

                <div class="story-actions">
                    <button class="action-btn" onclick="speakStory()">
                        <span id="ttsIcon">ğŸ”Š</span> Lire
                    </button>
                    <button class="action-btn" onclick="generateIllustration()">
                        ğŸ¨ Nouvelle image
                    </button>
                    <button class="action-btn secondary" onclick="saveStory()">
                        ğŸ’¾ Sauvegarder
                    </button>
                </div>
            </div>
        </div>

        <!-- Loading Screen -->
        <div class="screen" id="loadingScreen">
            <div class="loading-container">
                <div class="spinner">ğŸª„</div>
                <p>La magie opÃ¨re...</p>
                <p class="loading-sub">L'IA imagine votre histoire</p>
            </div>
        </div>
    </div>

    <!-- Install Prompt -->
    <div class="install-prompt hidden" id="installPrompt">
        <p>ğŸ“± Installer Contes Magiques sur votre tÃ©lÃ©phone</p>
        <button onclick="installPWA()">Installer</button>
        <button onclick="dismissInstall()">Plus tard</button>
    </div>

    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
